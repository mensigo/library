---
layout: "base.njk"
---

{% block content %}
    <!-- Название -->
    {% if title %}
    <h1 class="page-title">{{ title }}</h1>
    {% endif %}

    <div class="page-meta">
        <!-- Аниме статус -->
        {% if anime_status %}
        <div class="meta-item">
            <span class="meta-label">Аниме:</span>
            <span class="meta-value">{{ anime_status }}</span>
        </div>
        {% endif %}

        <!-- Манга статус -->
        {% if manga_status %}
        <div class="meta-item">
            <span class="meta-label">Манга:</span>
            <span class="meta-value">{{ manga_status }}</span>
        </div>
        {% endif %}

        <!-- Манга автор -->
        {% if manga_author %}
        <div class="meta-item">
            <span class="meta-label">Мангака:</span>
            <span class="meta-value">{{ manga_author }}</span>
        </div>
        {% endif %}

        <!-- Теги -->
        {% if tags %}
        <div class="meta-item">
            <span class="meta-label">Теги:</span>
            <div class="tags">
                {% for tag in tags %}
                <span class="tag">{{ tag }}</span>
                {% endfor %}
            </div>
        </div>
        {% endif %}

        <!-- Дата просмотра -->
<!--        {% if watch_date %}-->
<!--        <div class="meta-item">-->
<!--            <span class="meta-label">Просмотр:</span>-->
<!--            <time class="meta-value" datetime="{{ watch_date | dateToRfc3339 }}">-->
<!--                <i>{{ watch_date | shortDate }}</i>-->
<!--            </time>-->
<!--        </div>-->
<!--        {% endif %}-->
    </div>

    <!-- Оценка -->
    {% if score %}
    <div class="score-progress-container">
        {% set scoreValue = score | getScoreValue %}
        {% set scorePercent = score | getScorePercent %}
        <div class="score-progress-bar">
            <div class="score-progress-fill score-{{ score | getScoreColor }}" style="width: {{ scorePercent }}%"></div>
        </div>
        <div class="score-progress-label">
            <span class="score-value">{{ scoreValue }}</span>
            <span class="score-separator">/</span>
            <span class="score-max">10</span>
        </div>
    </div>
    {% endif %}

    <!-- Оригинальный контент -->
    <div class="content-wrapper">
        <div class="article">
            <article class="article__content">
                {{ content | safe }}
            </article>
        </div>
    </div>

    <!-- Дата обновления -->
    {% if upd_date %}
    <div class="page-updated">
        <small>{{ upd_date | readableDate }}</small>
    </div>
    {% endif %}

{% endblock %}